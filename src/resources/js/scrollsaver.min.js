//scrollsaver.js - Mahdi Hasheminezhad (http://hasheminezhad.com)
(function(a,f){var c=a.document,h=a.location,k=a.escape("scrollPosition|"+h.pathname+h.search);a.loadScroll=function(){var e;try{e=(localStorage.getItem(k)||"").split("|")}catch(g){for(var d=c.cookie.split(";"),b=d.length-1;0<=b&&!e;b--){var f=d[b].split("=");f[0]==k&&(e=a.unescape(f[1]).split("|"))}}e=e||[];for(d=e.length-1;0<=d;d--){b=e[d].split(",");try{if(""==b[0])a.scrollTo(b[1],b[2]);else if(b[0]){var h=c.getElementById(b[0]);h.scrollLeft=b[1];h.scrollTop=b[2]}}catch(l){}}};a.saveScroll=function(){var e=
[],g,d;a.pageXOffset!==f?(g=a.pageXOffset,d=a.pageYOffset):c.documentElement&&c.documentElement.scrollLeft!==f?(g=c.documentElement.scrollLeft,d=c.documentElement.scrollTop):(g=c.body.scrollLeft,d=c.body.scrollTop);(g||d)&&e.push(["",g,d].join());g=c.all||c.getElementsByTagName("*");for(d=0;d<g.length;d++){var b=g[d];b.id&&(b.scrollLeft||b.scrollTop)&&e.push([b.id,b.scrollLeft,b.scrollTop].join())}try{localStorage.setItem(k,e.join("|"))}catch(h){c.cookie=k+"="+e.join("|")+";"}}})(window);
(function(a){var f,c;a.attachEvent?(f=a.attachEvent,c="on"):(f=a.addEventListener,c="");f(c+"load",a.loadScroll,!1);f(c+"unload",a.saveScroll,!1)})(window);
//ASP.NET
setTimeout(function(){if("undefined"!=typeof Sys&&"undefined"!=typeof Sys.WebForms){var a=Sys.WebForms.PageRequestManager.getInstance();a.add_beginRequest(window.saveScroll);a.add_endRequest(window.loadScroll)}},0);